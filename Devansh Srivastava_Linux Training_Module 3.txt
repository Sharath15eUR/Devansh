
d_sers@LAPTOP-G5RP63SK:~$ vi backup_manager.sh

#!/bin/bash

source_directory="$1"
backup_directory="$2"
file_extension="$3"

if [ -z "$source_directory" ] || [ -z "$backup_directory" ] || [ -z "$file_extension" ]; then
  echo "Usage: $0 <source_directory> <backup_directory> <file_extension>"
  exit 1
fi

files_to_backup=($source_directory/*"$file_extension")

if [ ${#files_to_backup[@]} -eq 0 ]; then
  echo "No files with extension '$file_extension' found in '$source_directory'."
  exit 1
fi

export BACKUP_COUNT=0
BACKUP_SIZE=0

if [ ! -d "$backup_directory" ]; then
  echo "Backup directory does not exist. Attempting to create it..."
  mkdir -p "$backup_directory"
  if [ $? -ne 0 ]; then
    echo "Failed to create backup directory. Exiting."
    exit 1
  fi
fi

echo "Files to back up:"
for file in "${files_to_backup[@]}"; do
  file_size=$(stat --format=%s "$file")
  echo "$file - $file_size bytes"
done

for file in "${files_to_backup[@]}"; do
  destination="$backup_directory/$(basename "$file")"

  if [ -f "$destination" ]; then
    if [ "$file" -nt "$destination" ]; then
      cp "$file" "$destination"
      echo "Overwritten: $file"
    else
      echo "Skipped: $file (Backup is up to date)"
      continue
    fi
  else
    cp "$file" "$destination"
    echo "Backed up: $file"
  fi

  BACKUP_COUNT=$((BACKUP_COUNT + 1))
  file_size=$(stat --format=%s "$file")
  BACKUP_SIZE=$((BACKUP_SIZE + file_size))
done

report_file="$backup_directory/backup_report.log"
echo "Backup Summary" > "$report_file"
echo "----------------" >> "$report_file"
echo "Total files processed: $BACKUP_COUNT" >> "$report_file"
echo "Total size of files backed up: $BACKUP_SIZE bytes" >> "$report_file"
echo "Backup directory: $backup_directory" >> "$report_file"
echo "Report generated at $report_file"

exit 0


d_sers@LAPTOP-G5RP63SK:~$ chmod +x backup_manager.sh
d_sers@LAPTOP-G5RP63SK:~$ ./backup_manager.sh "/home/d_sers/" "/home/d_sers/backup" ".txt"
Files to back up:
/home/d_sers//Devansh Srivastava_Linux Training_Module 2.txt.txt - 4396 bytes
/home/d_sers//config.txt - 90 bytes
/home/d_sers//filtered_log.txt - 148 bytes
/home/d_sers//larger_than_1MB_file.txt - 118 bytes
/home/d_sers//output_file.txt - 158 bytes
/home/d_sers//updated_config.txt - 90 bytes
Backed up: /home/d_sers//Devansh Srivastava_Linux Training_Module 2.txt.txt
Backed up: /home/d_sers//config.txt
Backed up: /home/d_sers//filtered_log.txt
Backed up: /home/d_sers//larger_than_1MB_file.txt
Backed up: /home/d_sers//output_file.txt
Backed up: /home/d_sers//updated_config.txt
Report generated at /home/d_sers/backup/backup_report.log

d_sers@LAPTOP-G5RP63SK:~$ cd backup
d_sers@LAPTOP-G5RP63SK:~/backup$ ls
'Devansh Srivastava_Linux Training_Module 2.txt.txt'   backup_report.log   config.txt   filtered_log.txt   larger_than_1MB_file.txt   output_file.txt   updated_config.txt
d_sers@LAPTOP-G5RP63SK:~/backup$